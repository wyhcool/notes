---
title: Java 的基本程序设计结构
date: 2019-12-05 07:30:00
update: 2019-12-08 14:00:00
tags:
categories:
- Java
---

## 一个简单的 Java 应用程序
```java
public class Welcome {
    public static void main (String[] args) {
        System.out.println("We will not use 'Hello World'!");
    }
}
```
所有的 Java 应用程序都具有如上代码类似的结构：
- Java 区分大小写。
- 访问修饰符(access modifier)用于控制程序的其他部分对该段代码的访问级别，包括关键字 public, protected, private, default(包内)。
- 关键字 class 表明 Java 程序中的全部内容都必须放置在类中，类作为一个加载程序逻辑的容器，程序逻辑定义了应用程序的行为。类是构建所有 Java 应用程序和 applet 的构建块。
- 关键字 class 后面紧跟类名，类名是以大写字母开头的名词，如果由多个单词组成，则每一个单词的首字母大写(驼峰命名法, CamelCase)。
- 源代码的文件名必须与公共类的名字相同，并用 .java 作为扩展名。
- Java 编译器将源代码编译为一个包含字节码的文件，自动地命名为：公共类名字 + .class。
- 使用命令 `java 公共类名` (不添加 .class 扩展名) 运行已编译的程序时，虚拟机将从指定类的 main 方法开始执行。
- Java 程序用大括号 `{ }` 划分程序的各个部分(通常称为块)，Java 中任何方法的代码都用 `{` 开始，用 `}` 结束。
- Java 中的 main 方法必须有一个外壳类，必须是静态的，没有返回值。如果 main 方法正常退出，那么 Java 应用程序为操作系统返回的退出代码为 0，表示成功地运行了程序，如果希望终止程序时返回其他代码，那么需要调用 System.exit 方法。
- 在 Java 中，每个句子必须用分号 `;` 结束。
- Java 使用通用语法 `object.method(params)` 来调用方法。
- Java 采用双引号来分隔字符串。
- 在 Java 的方法中，可以没有参数，也可以有一个或多个参数。对于一个方法，即使没有参数也需要使用空括号。

## 注释
- 使用 `//`，其注释内容从 // 开始到本行结尾。
- 使用 `/*` 和 `*/` 将一段比较长的注释括起来。(不能嵌套)
- 使用 `/**` 和 `*/` 用来自动地生成文档注释。

## 数据类型
Java 是一种强类型语言，这意味必须为每一个变量声明一种类型。在 Java 中，一共有 8 种基本类型(primitive type)，其中有 4 种整型、2 种浮点类型，1 种用于表示 Unicode 编码的字符单元的字符 char 类型和 1 种用于表示真值的 boolean 类型。

### 整型
整型用于表示没有小数部分的数值，它允许是负数。

|类型|存储需求|取值返回|
|:-:|:-:|:-|
| int | 4 字节| -2^31  ~ (2^31 - 1, 21亿多) |
| short | 2 字节 | -2^15 ~ (2^15 -1, 32767) |
| long | 8 字节 | -2^63 ~ (2^63 - 1) |
| byte | 1 字节 | -2^7(-128) ~ (2^8 - 1, 127)|

有符号数补码编码，将最高有效位解释为负权，补码的范围不对称(|Tmin| = Tmax + 1)

在 Java 中，整型的范围与运行 Java 代码的机器无关。

长整型数值有一个后缀 L 或 l。十六进制数值有一个前缀 0x 或 0X。八进制有一个前缀 0。从 Java7 开始，二进制数有一个前缀 0b 或 0B。

从 Java7 开始，可以为数字字面量加下划线，如用 1_000_000 表示一百万，Java 编译器会去除这些下划线。

注意⚠️：Java 没有任何无符号(unsigned)形式的整型数值。

### 浮点类型
浮点类型用于表示有小数部分的数值。

| 类型 | 存储需求 | 取值范围 |
|:-:|:-:|:-|
| float | 4 字节 | 有效位数 6 ~7 位 |
| double | 8 字节 | 有效位数 15 位 |

float 类型，其中下标 0 到 22 位为尾数位，在保存尾数时，可省略小数点前的 1，从而用 23 位尾数域表示 24 位尾数；下标 23 到 30 位为阶码位，包含 8 位偏置(biased)指数 e，e 是无符号数，表示为 e<sub>k-1</sub>e<sub>k-2</sub>...e<sub>0</sub>，阶码的值 E = e - Bias，Bias = 2<sup>k-1</sup> - 1，单精度 k 是 8，Bias 是 127，Emin 为 -127，Emxax 为 128；下标 31 位为符号位，0 表示正数，-1 表示负数。

double 类型，其中下标 0 到 51 位为尾数位，52 到 62 位为 11 位的阶码位，63 位为符号位。

double 类型表示的数值精度是 float 类型的两倍，绝大部分程序都采用 double 类型。

float 类型的数值有一个后缀 F 或 f，没有后缀 F 的浮点数默认为 double 类型。当然，也可以在浮点数值后面添加后缀 D 或 d。

所有的浮点数值计算都遵循 IEEE 754 规范，三个特殊的浮点数值：
- 正无穷大，常量 Double.POSITIVE_INFINITY；
- 负无穷大，常量 Double.NEGATIVE_INFINITY；
- NaN（不是一个数字）

NaN(Not a number)，当指阶码全为 1，尾数域不为 0，用于处理计算中的错误情况，NaN 不是一个，而是一族。
```java
//不能这样检测一个特定值是否等于 Double.NaN
if (x == Double.NaN) // is never true

if (Double.isNaN(x)) // check whether x is 'not a number'
```

无穷大(Infinity)，当指阶码全为 1，尾数域全为 0，用于表达计算中出现的上溢(overflow)问题。

有符号的 0，当指阶码全为 0，尾数域全为 0，由于符号位，存在 +0 和 -0，IEEE 标准规定正负零相等。

非规范化浮点数，当指阶码全为 0，尾数域不为 0，表示非常接近于 0.0 的数，此时就没有隐含的尾数位。

### char 类型
char 类型用于表示单个字符，char 类型的字面量值要用单引号括起来。有些 Unicode 字符可以用一个 char 值描述，有些则需要两个 char 值。

char 类型的值可以表示为十六进制，其范围从 \u0000 到 \uffff。除了转义序列 \u 之外，还有一些用于表示特殊字符的转义序列。

| 转义序列 | 名称 | Unicode 值 |
|:-:|:-:|:-|
| \b | 退格 | \u0008 |
| \t | 制表 | \u0009 |
| \n | 换行 | \u000a |
| \r | 回车 | \u000d |
| \" | 双引号 | \u0022 |
| \' | 单引号 | \u0027 |
| \\\ | 反斜杠 | \u005c |

注意：
- 所有这些转义序列都可以出现在加引号的字符字面量或字符串中。
- 转义序列 \u 还可以出现在加引号的字符字面量和字符串你之外（而其他所有转义序列不可以）。

警告：Unicode 转义序列会在解析代码之前得到处理。
```java
String u = "\u0022+\u0022";
System.out.println(u.length());  // 0

//解释：\u0022 会在解析之前转换为 "，这会得到 ""+""，也就是一个空串

// hello \u000a is a new Line    // 错误: 需要';'

//解释：\u000a 会替换为一个换行符

// Look inside c:\users          // 错误：非法的 Unicode 转义

//解释：\u 后面并未跟着 4 位十六进制数
```
从 Java SE 5.0 开始，码点(code point)是指与一个编码表中的某个字符对应的代码值。在 Unicode 标准中，码点采用十六进制书写，并加上前缀 U+。Unicode 的码点可以分成 17 个代码级别(code plane)。第一个代码级别称为基本多语言级别(BMP, basic multilingual plane)，码点从 U+0000 到 U+FFFF，其中包括经典的 Unicode 码点；其余的 16 个级别码点从 U+10000 到 U+10FFFF，其中包括一些辅助字符(supplementary character)。

UTF-16 编码采用不同长度的编码表示所有 Unicode 码点。在基本多语言级别中，每个字符用 16 位表示，而辅助字符采用一对连续的代码单元进行编码，这样构成的编码值落入基本多语言平面中口空闲的10+10位空间内，通常被称为替换区域(surrogate area)，U+D800 ~ U+DBFF 用于第一个代码单元，U+DC00 ~ U+DFFF 用于第二个代码单元。

注意：在 Java 中，char 类型描述了 UTF-16 编码中的一个代码单元。

强烈建议不要在程序中使用 char 类型，除非确实需要处理 UTF-16 代码单元。最好将字符串作为抽象数据类型处理。

### boolean 类型
boolean(布尔)类型有两个值：false 和 true，用来判定逻辑条件。

注意⚠️：整型值和布尔值之间不能进行相互转换。

## 变量
在 Java 中，每个变量都有一个类型(type)。在声明变量时，变量的类型位于变量名之前。每个声明以分号结束。

变量名必须是以字母开头并由字母或数字构成的序列。字母包括 'A' ~ 'Z'、'a' ~ 'z'、'_'、'$' 或在某种语言中表示字母的 Unicode 字符。数字包括 '0' ~ '9' 和在某种语言中表示数字的任何 Unicode 字符。变量名中所有的字符都是有意义的，并且大小写敏感。变量名的长度基本上没有限制。

提示：可以使用 Character 类的 isJavaIdentifierStart 和 isJavaIdentifierPart 来检查哪些 Unicode 字符属于 Java 中的字母。

尽管 $ 是一个合法的 Java 字符，但在自己代码中不要使用这个字符，它只用在 Java 编译器或其他工具生成的名字中。

可以在一行中声明多个变量，采用逗号分隔，但不提倡。逐一声明每一个变量可以提高程序的可读性。

### 变量初始化
声明一个变量之后，必须用赋值语句对变量进行显式初始化。

也可以将变量的声明和初始化放在同一行。

在 Java 中可以将声明放在代码中的任何地方，推荐：变量的声明尽可能靠近变量第一次使用的地方。

### 常量
在 Java 中，必须使用关键字 final 定义常量，表示这个变量只能被赋值一次，一旦被赋值之后，就不能够再更改了。习惯上，常量名使用全大写。

在 Java 中，经常希望某个常量可以在一个类中的多个方法中使用，将这些常量称为类常量，可以使用关键字 static final 设置一个类常量。

需要注意：类常量的定义位于 main 方法的外部，因此，在同一个类的其他方法也可以使用该常量。而且，如果一个常量被声明为 public，那么其他类的方法也可以使用这个常量。

## 运算符
当参与除法(/)运算的两个操作数都是整数时，表示整数除法；否则，表示浮点除法。

对于浮点数的算术运算，默认情况下，Java 虚拟机允许对中间计算结果采用扩展的精度，而不是进行截断。但是对于使用关键字 strictfp 标记的方法必须使用严格的浮点计算来生成中间结果。

### 科学函数与常量


## 字符串

## 输出输出

## 控制流

## 大数值

## 数组

## 参考
[1] Java核心技术.卷Ⅰ.基础知识(原书第10版).机械工业出版社,2016.8