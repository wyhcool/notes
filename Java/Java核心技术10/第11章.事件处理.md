---
title: 事件处理
date: 2020-02-28 10:19:00
tags:
categories:
- Java
---

## 事件处理基础
任何支持 GUI 的操作环境都要不断地监视按键或点击鼠标这样的事件，操作系统将这些事件报告给正在运行的应用程序，如果有事件产生，每个应用程序将决定如何对它们做出响应。

在 Visual Basic 语言中，事件与代码有着明确的对应关系，程序员对相关的特定事件编写代码，并将这些代码放置在过程中。

在 C 语言中，需要编写代码不断地检查事件队列，以便查询操作环境报告的内容。

在 AWT 所知的事件范围内，完全可以控制事件从事件源(event source)到事件监听器(event listener)的传递过程，并将任何对象指派给事件监听器。

事件源有一些向其注册事件监听器的方法，当某个事件源产生事件时，事件源会向事件注册的所有事件监听器对象发送一个通告。

在 Java 中将事件的相关信息封装在一个事件对象(event object)中，所有的事件对象都最终派生于 `java.util.EventObject` 类。

不同的事件源可以产生不同类别的事件，例如，按钮可以发送一个 `ActionEvent` 对象，而窗口可以发送 `WindowEvent` 对象。

AWT 事件处理机制：
- 监听器对象是一个实现了特定监听器接口(listener interface)的类的实例。
- 事件源是一个能够注册监听器对象并发送事件对象的对象。
- 当事件发生时，事件源将事件对象传递给所有注册的监听器。
- 监听器对象将利用事件对象中的信息决定如何对事件做出响应。

### 处理按钮点击事件
使用 `ActionListener` 接口并不仅限于按钮点击事件，它可以应用于多种情况：
- 当采用鼠标双击的方式选择了列表框中的一个选项时；
- 当选择了一个菜单项时；
- 当在文本域中按回车键时；
- 对于一个 `Timer` 组件来说，当到达指定的时间间隔时。

使用 `ActionListener` 接口的方式都是一样的：`actionPerformed` 方法( `ActionListener` 中的唯一方法)将接收一个 `ActionEvent` 类型的对象作为参数，这个事件对象包含了事件发生时的相关信息。

这里有一个需要考虑的问题：`ColorAction` 对象不能访问 `buttonPanel` 变量，可以采用两种方式来解决这个问题。一种是将面板存储在 `ColorAction` 对象中，并在 `ColorAction` 的构造器中设置它；另一种是将 `ColorAction` 作为 `ButtonFrame` 类的内部类，这样一来，它的方法就自动地拥有访问外部面板的权限了。

事件监听器对象通常需要执行一些对其他对象可能产生影响的操作，可以策略性地将监听器类放置在需要修改状态的那个类中。

### 简洁地指定监听器


## 动作


## 鼠标事件


## AWT 事件继承层次


## 参考
[1] Java核心技术.卷Ⅰ.基础知识(原书第10版).机械工业出版社,2016.8