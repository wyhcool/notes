---
title: 水果成篮
date: 2022-08-28 16:21:00
tags:
categories:
- 刷题
---

## 双指针远近交换法：

理解当前元素与远处、近处元素的关系：
- 与近处一致，则长度累加，远近关系不变
- 与远处一致，则长度累加，远处取之前近处，近处更新为当前
- 与两处相异，则长度重置，远处取之前近处，近处更新为当前

```javascript
/**
 * @param {number[]} fruits
 * @return {number}
 */
var totalFruit = function (fruits) {
  var len = fruits.length
  if (len === 1) {
    return 1
  }
  var prev = 0
  var next = 0
  var max = 1
  var count = 1
  for (var i = 1; i < len; i++) {
    if (fruits[i] === fruits[next]) {
      // 与近处一致  1 1 2 2 2
      count++
    } else if (fruits[i] === fruits[prev]) {
      // 与远处一致  1 2 2 2 1
      // 交换远近
      count++
      prev = next
      next = i
    } else {
      // 与远近均不等 1 2 2 2 1 3
      // 保留近处为远处
      // 近处设置为当前
      // 并重新计算长度
      prev = next
      next = i
      count = next - prev + 1
    }
    max = Math.max(max, count)
  }
  return max
}
```

## 参考
[1] https://leetcode.cn/problems/fruit-into-baskets/