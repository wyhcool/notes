---
title: 【基础】选择器 Selectors
date: 2019-01-21 22:33:51
tags:
categories:
- CSS
---

## 基本规则
CSS 的一个核心特性是能向文档中的一组元素类型应用某些规则。

每个规则都有两个基本部分：选择器(selector)和声明块(declaration block)，声明块由一条或多条声明(declaration)组成，每个声明则是一个属性-值对(property-value)。

每个样式表由一系列规则组成。

## 基本选择器
### 元素选择器
HTML 文档的元素是最基本的选择器，元素选择器又称为类型选择器（type selector）。

“类型选择器匹配文档语言元素类型的名称。类型选择器匹配文档树中该元素类型的每一个实例。”

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
|element | p | 选择所有 <p\> 元素。 | 1 |

### 通配选择器
通配选择器显示为一个星号(\*)，可以与任何元素匹配。

- 选取所有元素 *
- 选取另一个元素中的所有元素，比如 div *

<!-- more -->
### 类选择器
为了将一个类选择器的样式与元素关联，必须将 class 属性指定为一个合适的值。
在类名前加一个点号(.)，标记这是一个类选择器。通过这个点号，可以帮助类选择器与它可能结合的其它部分分隔开(如类选择器可能结合了元素选择器)。

可以为任意多个元素指定类。

选择器 p.warning 解释为：其 class 属性包含词 warning 的所有段落 p。

不指定结合的选择器时，可忽略通配选择器。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| .class | .intro | 选择 class 包含 intro 的所有元素。 | 1 |

#### 多类选择器
通过把两个类选择器链接在一起，仅可以选择同时包含这些类名的元素。
```html
<style>
p.warning.help {
    background: red;
}
</style>

<p class="help warning urgent">Help me!</p>
```

### ID 选择器
在 ID 前面有一个 # 号，标记这是一个 ID 选择器。

在一个HTML文档中，ID 选择器会使用一次，而且仅一次。

不指定结合的选择器时，可忽略通配选择器。

ID 选择器不能结合使用，因为 ID 属性不允许有以空格分隔的词列表。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| #id | #name | 选择 id="name" 的所有元素。 | 1 |

### 属性选择器
根据元素的属性来进行选择。

#### 简单属性选择器
如果希望选择有某个属性的元素，而不论该属性的值是什么，可以使用简单属性选择器。

将多个属性选择器链接在一起，可以根据多个属性进行选择。
```html
<style>
*[title] { font-weight: bold; }

a[href][title] { font-weight: bold; }
</style>
```

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| [attribute] | [target] | 选择带有 target 属性所有元素。 | 2 |

#### 根据具体属性值选择器
为任何元素指定属性和值组合，只选择有特定属性值的元素。

将多个属性-值选择器链接在一起，可以根据多个属性-值来进行选择。
```html
<style>
span[class="barren rocky"] { font-size: italic;}
</style>
```
注意：这种格式要求必须与属性值完全匹配。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| [attribute=value] | [target="_blank"] | 选择 target="_blank" 的所有元素。 | 2 |

#### 根据部分属性值选择器
选择器中出现了一个波浪号(~)，即可根据属性值中出现的一个用空格分隔的词来完成选择，这个选择器构造等价于点号类名选择器。

```html
<style>
span[class~="barren"] { font-size: italic;}
</style>
```

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| [attribute~=value] | [title~="flower"] | 选择 title 属性包含单词 "flower" 的所有元素。 | 2 |

子串匹配属性选择器：

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| [attribute^=value] | a[src^="https"] | 选择其 src 属性值以 "https" 开头的每个 <a> 元素。 | 3 |
| [attribute$=value] | a[src$=".pdf"] | 选择其 src 属性以 ".pdf" 结尾的所有 <a> 元素。 | 3 |
| [attribute*=value] | a[src*="abc"] | 选择其 src 属性中包含 "abc" 子串的每个 <a> 元素。| 3 |

#### 特定属性选择器

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| [attribute&#124;=value] | [lang&#124;="en"] | 选择 lang 属性值以 "en" 开头的所有元素。 | 2 |

## 组合选择器
### 后代选择器
后代选择器(也称包含选择器或上下文选择器)以选择作为某元素后代的元素。
' ' (空格) 操作符将选择第一个元素的子代节点。
左边的选择器一端包括两个或多个用空格分隔的选择器，选择器之间的空格是一种结合符。

注意：后代选择器的两个元素之间的层次间隔可以是无限的。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
|element element | div p | 选择 <div\> 元素内部的所有 <p\> 元素。 | 1 |


### 子元素选择器
子元素选择器只能选择作为某元素子元素的元素。
'>' 操作符选择第一个元素的直接子节点。
子元素选择器使用了大于号（\>，子结合符），子结合符两边可以有空白符，这是可选的。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
|element>element | div>p | 选择父元素为 <div\> 元素的所有 <p\> 元素。 | 2 |


### 相邻兄弟选择器
相邻兄弟选择器 (+) 介于两个选择器之间，当第二个元素紧跟在第一个元素之后，并且两个元素都是属于同一个父元素的子元素，则第二个元素将被选中。
'+' 操作符选择相邻元素，即第二个节点紧邻着第一个节点，并且拥有共同的父节点。
相邻兄弟选择器使用了加号（+，相邻兄弟结合符），相邻兄弟结合符旁边可以有空白符。

注意：用一个结合符只能选择两个相邻兄弟中的第二个元素。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
|element+element | div+p | 选择紧接在 <div\> 元素之后的 <p\> 元素。 | 2 |


### 一般兄弟选择器
在使用 ~ 连接两个元素时,它会匹配第二个元素，条件是它必须跟(不一定是紧跟)在第一个元素之后,且他们都有一个共同的父元素。
'~' 操作符选择兄弟元素，也就是说，第二个节点在第一个节点后面的任意位置，并且这俩节点的父节点相同。

选择器 element1 之后出现的所有 element2，两种元素必须拥有相同的父元素，但是 element2 不必直接紧随 element1。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
|element~element | div~p | 选择前面有 <div\> 元素的每个 <p\> 元素。 | 3 |


## 伪类和伪元素
### 伪类
伪类允许基于未包含在文档树中的状态信息来选择元素。

#### 链接伪类
:link 指示作为超链接(即有一个 href 属性)并指向一个未访问地址的所有锚。

为避免将链接样式应用到目标锚，要使用 a:link 伪类。

普通的锚使用 name 属性创建 HTML 页面中的书签。当使用命名锚（named anchors）时，我们可以创建直接跳至该命名锚（比如页面中某个小节）的链接，这样使用者就无需不停地滚动页面来寻找他们需要的信息了。

```html
<a name="section4">4. The meaning of life.</a>
```

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :link | a:link | 选择所有未被访问的链接。 | 1 |
| :visited | a:visited | 选择所有已被访问的链接。 | 1 |

#### 用户行为伪类
可以根据用户行为改变文档的外观。

:focus表示获得焦点的元素（如表单输入）。当用户点击或触摸元素或通过键盘的 “tab” 键选择它时会被触发。

:active 匹配被用户激活的元素。它让页面能在浏览器监测到激活时给出反馈。当用鼠标交互时，它代表的是用户按下按键和松开按键之间的时间。:active 伪类通常用来匹配tab键交互。通常用于但并不限于 <a\> 和 <button\> HTML元素。

:hover 适用于用户使用指示设备虚指一个元素（没有激活它）的情况。:hover伪类可以任何伪元素上使用。

注意: 在触摸屏上 :hover 有问题，不可用。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :active | a:active |  选择活动链接。| 1 |
| :hover |  a:hover  | 选择鼠标指针位于其上的链接。 | 1 |
| :focus | input:focus | 选择获得焦点的 input 元素。 | 2 |

#### 目标伪类
用来匹配文档（页面）的URI中某个标识符的目标元素。
URL 带有后面跟有锚名称 #，指向文档内某个具体的元素。这个被链接的元素就是目标元素(target element)。
:target 选择器可用于选取当前活动的目标元素。

```html
<style>
div:target{background:gray;color:white; border: 1px dotted silver;}
</style>
<a href="#title1">标题1</a>
<a href="#title2">标题2</a>
<a href="#title3">标题3</a>
<div id="title1">内容1</div>
<div id="title2">内容2</div>
<div id="title3">内容3</div>
```

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :target | #news:target | 选择当前活动的 #news 元素。 | 3 |


#### 语言伪类
语言伪类选择器是根据元素的语言编码匹配元素。这种语言信息必须包含在文档中，或者与文档关联，不能从CSS指定。
为文档指定语言，有两种方法：
- <\!DOCTYPE HTML\><html lang="en-US"\>
- \<body lang="fr"\>

语言伪类选择器允许不同的语言定义特殊的规则，这在多语言版本的网站用起来是特别的方便。
E(element):lang(language)表示选择匹配E的所有元素，且匹配元素指定了lang属性，选取带有以指定值 language 开头的 lang 属性的元素。

```html
<!DOCTYPE html>
<html lang="en-Us">
<head>
<style>
:lang(en){quotes:'"' '"';}
:lang(en) p{background:red;}
:lang(fr){quotes:'?' '?';}
:lang(fr) p{background:green;}
</style>
</head>
<body>

<p>
Happy New Year!
</p>

</body>
</html>
```

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :lang(language) | p:lang(it) | 选择带有以 "it" 开头的 lang 属性值的每个 <p\> 元素。| 2 |

#### UI元素状态伪类
主要用于form表单元素上，以提高网页的人机交互、操作逻辑以及页面的整体美观，使表单页面更具个性与品位，而且使用户操作页面表单更便利和简单。
UI元素状态包括：启用、禁用、选中、未选中、获得焦点、失去焦点、锁定和待机等。
HTML元素表单文本输入框，分启用和禁用；
HTML元素表单单选按钮和多选按钮，分选中和未选中；

:enabled 选择器匹配每个已启用的元素。

:disabled 选择器匹配每个被禁用的元素。

:disabled 表示任何被禁用的元素。如果一个元素不能被激活（如选择、点击或接受文本输入）或获取焦点，则该元素处于被禁用状态。元素还有一个启用状态（enabled state），在启用状态下，元素可以被激活或获取焦点。

:checked 表示任何处于选中状态的radio(<input type="radio"\>), checkbox (<input type="checkbox"\>) 或("select") 元素中的option HTML元素("option")。

Note:因为浏览器经常将<option\>视为可替换元素,因此不同的浏览器通过:checked伪类渲染出来的效果也不尽相同.

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :enabled | input:enabled | 选择每个启用的 <input\> 元素。 | 3 |
| :disabled | input:disabled | 选择每个禁用的 <input\> 元素 | 3 |
| :checked | input:checked | 选择每个被选中的 <input\> 元素。 | 3 |


#### 结构伪类
结构伪类选择器是根据元素在文档树中的某些特性（如相对位置）定位到它们。也就是，通过文档树结构的相互关系来匹配特定的元素，从而减少HTML文档对ID或类名的定义，帮助你保持代码干净和整洁；就是通过DOM文档树才获取对应的元素。

:first-child 选择器匹配属于其父元素的第一个子元素的每个元素。

:last-child 选择器匹配属于其父元素的最后一个子元素的每个元素。

:only-child 选择器匹配属于其父元素的唯一子元素的每个元素。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :first-child | p:first-child | 选择属于父元素的第一个子元素的每个 <p\> 元素。 | 2 |
| :last-child | p:last-child | 选择属于其父元素最后一个子元素每个 <p\> 元素。 | 3 |
| :only-child | p:only-child | 选择属于其父元素的唯一子元素的每个 <p\> 元素。 | 3 |


:nth-child(n) 选择器匹配属于其父元素的第 n 个子元素的每个元素，n 可以是数字、关键词或公式。（先取所有的子元素，再匹配模式，取出目标元素）

:nth-child(an+b) 首先找到所有当前元素的子元素，然后按照位置先后顺序从1开始排序，选择的结果为第（an+b）个元素的每个元素的集合（n=0，1，2，3...）。示例：

0n+3 或简单的 3 匹配第三个元素。
1n+0 或简单的 n 匹配每个元素。
2n+0 或简单的 2n 匹配位置为 2、4、6、8...的元素（n=0时，2n+0=0，第0个元素不存在，因为是从1开始排序)。可以使用关键字 even 来替换此表达式。
2n+1 匹配位置为 1、3、5、7...的元素。可以使用关键字 odd 来替换此表达式。
3n+4 匹配位置为 4、7、10、13...的元素。

a 和 b 都必须为整数，并且元素的第一个子元素的下标为 1。换言之就是，该伪类匹配所有下标在集合 { an + b; n = 0, 1, 2, ...} 中的子元素。另外需要特别注意的是，an 必须写在 b 的前面，不能写成 b+an 的形式。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :nth-child(n) | tr:nth-child(2n) | 表示HTML表格中的偶数行。 | 3 |
| :nth-child(n) | tr:nth-child(odd) | 表示HTML表格中的奇数行。| 3 | 
| :nth-child(n) | p:nth-child(2) | 选择属于其父元素的第二个子元素的每个 <p\> 元素。 | 3 |
| :nth-last-child(n) | p:nth-last-child(2)  | 从最后一个子元素开始计数。 | 3 |

<em>first-child选择的一定是第一个，但是first-of-type选择的不一定是第一个</em>

:first-of-type 选择器匹配属于其父元素的的特定类型的首个子元素的每个元素。

:last-of-type 选择器匹配属于其父元素的特定类型的最后一个子元素的每个元素。

:only-of-type 选择器匹配属于其父元素的特定类型的唯一子元素的每个元素。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :first-of-type | p:first-of-type | 选择属于其父元素的首个 <p\> 元素的每个 <p\> 元素。 选择在父元素中第一个出现的<p\>，而不管其在兄弟内的位置如何 | 3 |
| :last-of-type | p:last-of-type | 选择属于其父元素的最后 <p\> 元素的每个 <p\> 元素。 | 3 |
| :only-of-type | p:only-of-type | 选择属于其父元素唯一的 <p\> 元素的每个 <p\> 元素。 | 3 |

:nth-of-type(n) 选择器匹配属于父元素的特定类型的第 n 个子元素的每个元素，n 可以是数字、关键词或公式。
这个选择器匹配那些在相同兄弟节点中的位置与模式 an+b 匹配的相同元素。（先取所有的目标元素，再匹配模式）

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :nth-of-type(n) | p:nth-of-type(2) |  选择属于其父元素第二个 <p\> 元素的每个 <p> 元素。 | 3 |
| :nth-last-of-type(n) | p:nth-last-of-type(2) | 同上，但是从最后一个子元素开始计数。 | 3 |

#### 否定伪类
:not(selector) 选择器匹配非指定元素/选择器的每个元素。起到过滤内容的作用。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :not(selector) | :not(p) | 选择非 <p\> 元素的每个元素。 | 3 |

#### 文档根元素伪类
:root 选择器匹配文档根元素。在 HTML 中，根元素始终是 html 元素。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :root | :root | 选择文档的根元素。| 3 |

#### 空子元素伪类
:empty 选择器匹配没有子元素（包括文本节点）的每个元素。子元素只可以是元素节点或文本（包括空格）。注释或处理指令都不会产生影响。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :empty | p:empty | 选择没有子元素的每个 <p\> 元素（包括文本节点）。 | 3 |


### 伪元素
伪元素表示所有未被包含在HTML的实体。
CSS2.1中用到的：【:first-line】【:first-letter】【:before】【:after】
CSS3对伪元素进行了调整，在之前的基础上增加了一个冒号【::first-line】【::first-letter】【::before】【::after】，还增加了【::selection】
浏览器对这两种方法都支持。注意：对于IE6 ~ IE8仅支持单冒号。

#### 设置首字母样式
:first-letter 选择器用于选取指定选择器的首字母。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :first-letter | p:first-letter | 选择每个 <p\> 元素的首字母。 | 1 |

#### 设置首行样式
:first-line 选择器用于选取指定选择器的首行。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :first-line | p:first-line | 选择每个 <p\> 元素的首行。 | 1 |

#### 设置之前与之后样式
不是指存在于标记中的内容，而是可以插入额外内容的位置。尽管生成的内容不会成为DOM的一部分，但它同样可以设置样式；要为伪元素生成内容，还需要配合content属性。
:before 选择器在被选元素的内容前面插入内容。
:after 选择器在被选元素的内容后面插入内容。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| :before  | p:before | 在每个 <p\> 元素的内容之前插入内容。 | 2 |
| :after | p:after | 在每个 <p\> 元素的内容之后插入内容。 | 2 |

#### 内容选取
::selection 选择器匹配被用户选取的部分。
::selection 应用于文档中被用户高亮的部分（比如使用鼠标或其他选择设备选中的部分）。
只能向 ::selection 选择器应用少量 CSS 属性：color、background、cursor 以及 outline等。

IE9+、Opera、Google Chrome 以及 Safari 中支持 ::selection 选择器。
Firefox 支持替代的 ::-moz-selection。

| 选择器 | 例子 | 描述 | CSS |
| :- | :- | :- | :- |
| ::selection | ::selection | 选择被用户选取的元素部分。 | 3 |




## 分组
### 选择器分组
以逗号来分隔，将任意多个选择器分组在一起。

### 声明分组
对声明分组时，一定要在各个声明的最后使用分号。浏览器会忽略样式表中的空白符，而且用户代理必须依赖正确的语法才能解析样式表。

好的实践：让规则的最后一个声明也以分号结尾。










## 参考
[1] Meyer E , 迈耶, Meyer. CSS权威指南[M]. 东南大学出版社, 2007.

[2] [MDN CSS Selectors
](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors)

[3] [W3schoool CSS 选择器参考手册](http://www.w3school.com.cn/cssref/css_selectors.asp)