---
title: 求1+2+...+n
date: 2019-01-26 22:11:00
tags:
categories:
- 算法与数据结构
---

## 题目描述
求1+2+3+...+n，要求不能使用乘除法、for、while、if、else、switch、case等关键字及条件判断语句（A?B:C）。
[nowcoder](https://www.nowcoder.com/practice/7a0da8fc483247ff8800059e12d7caf1?tpId=13&tqId=11200&tPage=3&rp=3&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking)


## JavaScript解法

### 库函数

等差数列求和公式，(1+n)*n/2 = (n<sup>2</sup>+n)/2

使用乘方、加法、右移来实现。

```javascript
function Sum_Solution(n)
{
    return (Math.pow(n, 2) + n) >> 1;
}
```
涉及：
- Math.pow()是用来计算乘方的语法
- 位移运算有3种：左移（<<）、有符号右移(>>)、无符号右移(>>>)

JavaScript 中的所有整数都是[有符号整数](https://github.com/wyhcool/notes/blob/master/JavaScript/JavaScript%E8%AF%AD%E8%A8%80%E7%B2%BE%E7%B2%B9/%E7%AC%AC01%E7%AB%A0.%E7%B2%BE%E5%8D%8E.md#%E6%95%B0%E5%AD%97-numbers)。

位运算符并不直接操作64位的值，而是将64位转换为32位的整数，然后进行操作，最后再将结果转换为64位。

左移不影响操作数的符号位，有符号右移以符号位的值填充空位，无符号右移以0来填充空位。


### 递归

使用短路求值、加法、递归来实现。

利用递归代替了循环，并且使用逻辑与运算判断n何时为0。

```javascript
function Sum_Solution(n)
{
    return n && (n + Sum_Solution(n-1));
}
```
涉及：
- 利用逻辑与的[短路](https://github.com/wyhcool/notes/blob/master/JavaScript/JavaScript%E8%AF%AD%E8%A8%80%E7%B2%BE%E7%B2%B9/%E7%AC%AC01%E7%AB%A0.%E7%B2%BE%E5%8D%8E.md#%E8%A1%A8%E8%BE%BE%E5%BC%8F-expressions)特性实现递归终止，当n为0时，直接返回。
- JavaScript逻辑与操作可以应用于任何类型的操作数，第一个为[假值](https://github.com/wyhcool/notes/blob/master/JavaScript/JavaScript%E8%AF%AD%E8%A8%80%E7%B2%BE%E7%B2%B9/%E7%AC%AC01%E7%AB%A0.%E7%B2%BE%E5%8D%8E.md#if-%E8%AF%AD%E5%8F%A5)时，返回该操作数，否则返回第二个操作数。


