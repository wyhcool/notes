---
title: 斐波那契数列
date: 2019-01-28 22:24:00
tags:
categories:
- 算法与数据结构
---

## 题目描述
大家都知道斐波那契数列，现在要求输入一个整数n，请你输出斐波那契数列的第n项（从0开始，第0项为0）。
[nowcoder](https://www.nowcoder.com/practice/c6c7742f5ba7442aada113136ddea0c3?tpId=13&tqId=11160&tPage=1&rp=1&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking)


## JavaScript解法

### 公式法
f(n) = f(n-1) + f(n-2);
给初始值，然后不断累加。

```javascript
function Fibonacci(n)
{
    var prev = 0, 
        next = 1,
        curr = 0;

    while (n--) {
        curr = next;
        next = prev + next;
        prev = curr;
    }

    return curr;
}
```

### 递归解法
当n较大时很快产生栈溢出，调用帧过多。

```javascript
function Fibonacci(n)
{
    var store = [0, 1, 1, 2, 3];
    
    var fib = function(n) {
        var val = store[n];
        
        if (typeof val !== "number") {
            val = fib(n-1) + fib(n-2);
            store[n] = val;
        }
        
        return val;
    }
    return fib(n);
}
```

### 尾递归
JavaScript尾递归优化，在ES6的严格模式下才实现，其他环境下并不会优化尾递归。
尾递归的精髓就是吸取循环的精华——把每次计算的结果当作参数传递给下一次计算。
时间复杂度就是O（n），如果编译器优化空间复杂度O（1）。

```javascript
//错误❌
function Fibonacci(n)
{
    var fib = function(n, ppre, pre) {
        if (n === 0) {
            return ppre;
        }
        return (n-1, pre, ppre+pre);
    }
    return fib(n, 0, 1);
}

VS.
//正确✅
function Fibonacci(n)
{
    var fib = function(n, ppre, pre) {
        if (n === 0) {
            return ppre;
        }
        return fib(n-1, pre, ppre+pre);
    };
    
    return fib(n, 0, 1);
}
```
<em>还在那儿纳闷为什么不对呢？😠😠😠</em>
