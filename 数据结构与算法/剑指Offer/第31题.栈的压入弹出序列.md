---
title: 栈的压入弹出序列
date: 2019-01-31 00:03:00
tags:
categories:
- 算法与数据结构
---

## 题目描述
输入两个整数序列，第一个序列表示栈的压入顺序，请判断第二个序列是否可能为该栈的弹出顺序。假设压入栈的所有数字均不相等。例如序列1,2,3,4,5是某栈的压入顺序，序列4,5,3,2,1是该压栈序列对应的一个弹出序列，但4,3,5,1,2就不可能是该压栈序列的弹出序列。（注意：这两个序列的长度是相等的）
[nowcoder](https://www.nowcoder.com/practice/d77d11405cc7470d82554cb392585106?tpId=13&tqId=11174&tPage=2&rp=2&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking)


## JavaScript解法

### 这段代码就如同我现在的心绪一样，能解决问题，但是乱糟糟的

```javascript
function IsPopOrder(pushV, popV)
{
    // write code here
    var stack = [];
    
    for (var i = 0; i < popV.length; i++) {
        var target = popV[i];
        var value;
        if (stack.length === 0) {
            value = pushV.shift();
            while (value && value !== target) {
                stack.push(value);
                value = pushV.shift();
            }
            if (typeof value === "undefined") {
                return false;
            }
        } else {
            value = stack.pop();
            if (value !== target) {
                stack.push(value);
                value = pushV.shift();
                while (value && value !== target) {
                    stack.push(value);
                    value = pushV.shift();
                }
                if (typeof value === "undefined") {
                    return false;
                }
            }
        }
    }
    return true;
}
```

### 整理思路

将原数列依次压栈，取栈顶元素与所给出栈队列相比，如果相同则出栈，
如果不同则继续压栈，直到原数列中所有数字压栈完毕。
检测栈中是否为空，若空，说明出栈队列可由原数列进行栈操作得到。否则，说明出栈队列不能由原数列进行栈操作得到。

```javascript
function IsPopOrder(pushV, popV)
{
    // write code here
    var stack = [];
    var idx = 0;
    for (var i = 0; i < pushV.length; i++) {
        stack.push(pushV[i]);
        while (stack.length && stack[stack.length-1] === popV[idx]) {
            stack.pop();
            idx++;
        }
    }
    
    return stack.length === 0;
}
```
