---
title: 堆应用
date: 2022-08-01 22:21:00
tags:
categories:
- 算法
---

## 堆的应用一：优先级队列
优先级队列，首先应该是一个队列。队列最大的特性就是先进先出，不过在优先级队列中，数据的出队顺序不是先进先出，而是按照优先级来，优先级最高的，最先出队。

## 堆的应用二：利用堆求 Top K
求 Top K 的问题抽象成两类：一类是针对静态数据集合，也就是说数据集合事先确定，不会再变。另一类是针对动态数据集合，也就是说数据集合事先并不确定，有数据动态地加入到集合中。

针对静态数据，我们可以为维护一个大小为 K 的小顶堆，顺序遍历数组，从数组中取出数据与堆顶元素比较。如果比堆顶元素大，我们就把堆顶元素删除，并且将这个元素插入到堆中；如果比堆顶元素小，则不处理，继续遍历数组。这样等数组中的数据都遍历完之后，堆中的数据就是前 K 大的数据了。

遍历数组需要 O(n) 的时间复杂度，一次堆化操作需要 O(logK) 的时间复杂度，所以最坏情况下，n 个元素都入堆一次，时间复杂度就是 O(nlogK)。

## 堆的应用三：利用堆求中位数
中位数，顾名思义，就是处在中间位置的那个数。如果数据的个数是奇数，把数据从小到大排列，那第 (n/2 + 1) 个数据就是中位数（注意：假设数据是从 0 开始编号的）；如果数据的个数是偶数，那处于中间位置的数据有两个 (n/2) 和 (n/2 + 1)。

求中位数操作：我们需要维护两个堆，一个大顶堆，一个小顶堆。大顶堆中存储前半部分数据，小顶堆中存储后半部分数据，且小顶堆中的数据都大于大顶堆中的数据。随着数据的动态添加，动态调整两个堆中的数据，最后大顶堆的堆顶元素就是要求的数据。

## 参考
[1] https://time.geekbang.org/column/intro/100017301?tab=catalog

[2] https://github.com/wangzheng0822/algo
