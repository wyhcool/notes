---
title: 观察者模式 Observer
date: 2019-04-02 08:20:00
tags:
categories:
- 设计模式
---

## 介绍
报纸的订阅：
- 报社的业务是出版报纸；
- 向报社订阅报纸，只要他们有新的报纸出版，就会给你送来；只要你是他们的订户，你就会一直收到新报纸；
- 当你不想再看报纸时，取消订阅，他们就不会再送新报纸来；
- 只要报社还在运营，就会一直有客户向他们订阅或取消订阅报纸。

观察者模式定义了一系列对象之间的一对多关系，让多个观察者(Observer)对象同时监听同某一个主题(Subject)对象，当这个主题对象改变状态时，就会通知所有观察者，使他们能够自动更新自己。

观察者模式又叫发布-订阅(Publish/Subscribe)模式。

## 推模型 vs. 拉模型
- 推模型是主题对象改变时，主题对象一次性将所有更改的状态都推送给观察者。
- 拉模型是主题对象改变时，主题对象仅仅通知观察者状态发生了改变，此外主题对象需要提供一些公开的接口来供观察者来主动拉取数据。

拉模型的好处是可以让观察者按需获取，但同时有可能让主题对象变成一个门户大开的对象，同时增加了代码量和复杂度。

在 JavaScript 中我们一般会选择推模型，arguments 可以很方便地表示参数列表，通过使用 Function.prototype.apply() 方法将所有参数都推送给观察者。


## 使用观察者模式的便利
对象之间的解耦，当一个对象的改变需要同时改变其它对象，并且它不知道具体有多少对象需要改变的时候，就应该考虑使用观察者模式。



## 参考