---
title: 【进阶篇】使用 webpack
date: 2019-08-04 11:42:00
tags:
categories:
- Vue
---

## 介绍
在 webpack 世界里，一张图片、一个 css 甚至是一个字体，都称为模块(Module)，不同格式的文件通过特定的加载器(Loader)编译后，最终统一生成 .js、.css、.png 等静态资源文件，模块彼此存在依赖关系，webpack 就是来处理模块间的依赖关系的，并把它们进行打包。

## webpack 基础配置
创建一个目录，使用 npm 初始化配置：
```
$ npm init -y
```

首先，安装 webpack 依赖：
```
$ npm i webpack webpack webpack-cli -D
```

归根到底，webpack 就是一个 .js 配置文件，你的架构的好或差都体现在这个配置里，随着需求的不断出现，工程配置也是逐渐完善的。

安装 html-webpack-plugin，主要有两个作用
- 为html文件中引入的外部资源如 script、link 动态添加每次compile 后的 hash，防止引用缓存的外部文件问题；
- 可以生成创建 html 入口文件，比如单页面可以生成一个 html 文件入口，配置 N 个 html-webpack-plugin 可以生成 N 个页面入口。
```
$ npm i html-webpack-plugin -D
```

安装合并 webpack 配置的插件 webpack-merge，配置开发和生产环境：
```
$ npm i webpack-merge -D
```

安装 webpack-dev-server，为开发环境提供服务：
```
$ npm i webpack-dev-server -D
```

安装清除文件的插件 clean-webpack-plugin：
```
$ npm i clean-webpack-plugin -D
```

## 引入一些基本的 loader
安装 babel-loader，依赖安装要求：webpack 4.x | babel-loader 7.x | babel 6.x,注意 babel-loader 和 babel 的版本，不然会报错。
```
$ npm install -D babel-loader@7 babel-core babel-preset-env webpack
```

安装 file-loader、 url-loader 来支持图片、字体等文件：
```
$ npm install -D url-loader file-loader
```

安装 vue-loader 允许以一种名为单文件组件 (SFCs)的格式撰写 Vue 组件：
```
$ npm i vue-loader -D
```

处理样式；
- sass-loader: 将 sass 转 css
- css-loader: 将 css 转为 CommonJS 规范的 js 字符串
- style-loader: 将 js 字符串转为 style node 插入到 html 中
- postcss-loader: PostCSS 是一个允许使用 JS 插件转换样式的工具，我们用 postcss 的插件就要配置它，autoprefixer 就是 postcss 项目里的一个插件
- autoprefixer: 添加了 vendor 浏览器前缀，它使用 Can I Use 上面的数据。

```
$ npm i style-loader css-loader node-sass sass-loader postcss-loader autoprefixer -D
```

用 mini-css-extract-plugin 插件提取 css:
```
$ npm install mini-css-extract-plugin -D
```

## 优化

## 采用 vue-cli 构建项目

## 参考
[1] 梁灏. Vue.js 实战. 清华大学出版社, 2017.
[2] [webpack4 搭建 Vue 开发环境笔记](https://blog.csdn.net/weixin_41826907/article/details/84061160)